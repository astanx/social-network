{"version":3,"file":"static/js/541.6b087597.chunk.js","mappings":"iKACA,QAA0B,uBAA1B,EAA8D,0BAA9D,EAA+F,oBAA/F,EAA6H,uB,iECyF7H,SAAeA,EAAAA,EAAAA,KAPQC,IACd,CACLC,UAAWD,EAAME,MAAMD,UACvBE,QAASH,EAAME,MAAMC,WAIe,CAAEC,KAAI,KAAEC,WAAU,KAAEH,MAAM,MAAlE,EAhFeI,IACb,MAAMC,GAAWC,EAAAA,EAAAA,OAEVC,EAAOC,IAAYC,EAAAA,EAAAA,eAASC,IAC5BT,EAASU,IAAcF,EAAAA,EAAAA,WAAS,IACjC,SACJG,EAAQ,aACRC,EACAC,WAAW,OAAEC,KACXC,EAAAA,EAAAA,IAAQ,CAAC,IAEbC,EAAAA,EAAAA,YAAU,KACJb,EAAML,WACRM,EAAS,WACX,GACC,CAACD,EAAML,UAAWM,IA2BrB,OALAY,EAAAA,EAAAA,YAAU,MACJF,EAAOG,OAASH,EAAOI,WACzBX,EAAS,OACX,GACC,CAACO,KAEFK,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAgBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,WACJH,EAAAA,EAAAA,MAAA,QAAMC,UAAWC,EAAcG,SAAUZ,GA5B7Ba,IAEdtB,EAAMJ,MAAM0B,GAAMC,MAAMC,IACtBC,QAAQC,IAAIF,GAEqB,KAA7BA,EAASF,KAAKK,aAChBpB,GAAW,GACXP,EAAMD,aACNK,EAAS,SAEsB,IAA7BoB,EAASF,KAAKK,YAChBvB,EAAS,QAEsB,IAA7BoB,EAASF,KAAKK,aAChB1B,EAAS,YACTD,EAAMF,OACR,GACA,IAW8DqB,SAAA,EAC5DC,EAAAA,EAAAA,KAACQ,EAAAA,EAAO,CACNC,KAAK,QACLC,OAAO,WACHtB,EAAS,QAAS,CAAEuB,UAAU,IAClCC,QAAS7B,KAEXiB,EAAAA,EAAAA,KAACQ,EAAAA,EAAO,CACNC,KAAK,WACLC,OAAO,cACHtB,EAAS,WAAY,CAAEuB,UAAU,IACrCC,QAAS7B,KAEXa,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAmBC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,SAAOS,KAAK,WAAWI,GAAG,gBAC1Bb,EAAAA,EAAAA,KAAA,SAAAD,SAAO,mBAERtB,GAAUmB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAgBC,SAAA,EAC3CC,EAAAA,EAAAA,KAAA,OAAKc,IAAKlC,EAAMH,WAChBuB,EAAAA,EAAAA,KAACQ,EAAAA,EAAO,CAACE,OAAO,aAActB,EAAS,UAAW,CAAEuB,UAAU,SACrD,MAETX,EAAAA,EAAAA,KAACe,EAAAA,EAAQ,CAACC,KAAK,gBAEb,G,uCC9EV,QAA2B,2B,aCE3B,MAQA,EARkBpC,IAEdoB,EAAAA,EAAAA,KAAA,UAAQH,UAAWC,KAAsBlB,EAAKmB,SAC3CnB,EAAMoC,M,6CCLb,QAAwB,uBAAxB,EAAuD,uB,aCEvD,MAYA,GAZgBC,EAAAA,EAAAA,aAAW,CAAAC,EAAaC,KAAS,OAAjBvC,GAAMsC,EAEpC,OACElB,EAAAA,EAAAA,KAAA,SACAmB,IAAKA,EACHtB,UAAW,GAAGC,KAAiBlB,EAAMgC,QAAUd,EAAgB,QAC3DlB,EACNwC,YAAaxC,EAAM8B,QACjB,G","sources":["webpack://social_network/./src/components/Login/Login.module.css?3530","components/Login/Login.jsx","webpack://social_network/./src/components/UI/Button/MyButton.module.css?d4f4","components/UI/Button/MyButton.jsx","webpack://social_network/./src/components/UI/Input/MyInput.module.css?18b8","components/UI/Input/MyInput.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"content\":\"Login_content__Or5pz\",\"rememberMe\":\"Login_rememberMe__q-h5T\",\"form\":\"Login_form__csKgm\",\"captcha\":\"Login_captcha__VnIl7\"};","import React, { useEffect, useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport classes from \"./Login.module.css\";\r\nimport MyInput from \"../UI/Input/MyInput\";\r\nimport MyButton from \"../UI/Button/MyButton\";\r\nimport { loginAPI } from \"../../api/api\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { auth, getCaptcha, login } from \"../../redux/loginReducer.ts\";\r\n\r\nconst Login = (props) => {\r\n  const navigate = useNavigate();\r\n\r\n  const [error, setError] = useState(undefined);\r\n  const [captcha, setCaptcha] = useState(false);\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm({});\r\n\r\n  useEffect(() => {\r\n    if (props.isLogined) {\r\n      navigate(\"/profile\");\r\n    }\r\n  }, [props.isLogined, navigate]);\r\n\r\n  const submit = (data) => {\r\n\r\n    props.login(data).then((response) => {\r\n      console.log(response);\r\n      \r\n      if (response.data.resultCode === 10) {\r\n        setCaptcha(true)\r\n        props.getCaptcha()\r\n        setError(\"true\");\r\n      }\r\n      if (response.data.resultCode === 1) {\r\n        setError(\"true\");\r\n      }\r\n      if (response.data.resultCode === 0) {\r\n        navigate(\"/profile\");\r\n        props.auth();\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (errors.email || errors.password) {\r\n      setError(\"true\");\r\n    }\r\n  }, [errors]);\r\n  return (\r\n    <div className={classes.content}>\r\n      <h3>Login</h3>\r\n      <form className={classes.form} onSubmit={handleSubmit(submit)}>\r\n        <MyInput\r\n          type=\"email\"\r\n          holder=\"Email\"\r\n          {...register(\"email\", { required: true })}\r\n          iserror={error}\r\n        />\r\n        <MyInput\r\n          type=\"password\"\r\n          holder=\"Password\"\r\n          {...register(\"password\", { required: true })}\r\n          iserror={error}\r\n        />\r\n        <div className={classes.rememberMe}>\r\n          <input type=\"checkbox\" id=\"rememberMe\" />\r\n          <label>Remember me</label>\r\n        </div>\r\n        {captcha ? <div className={classes.captcha}>\r\n        <img src={props.captcha}/>\r\n        <MyInput holder=\"Captcha\" {...register(\"captcha\", { required: true })}/>\r\n        </div> : null}\r\n        \r\n        <MyButton name=\"Submit\" />\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    isLogined: state.login.isLogined,\r\n    captcha: state.login.captcha\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { auth, getCaptcha, login })(Login);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"MyButton\":\"MyButton_MyButton__CeT00\"};","import React from \"react\";\r\nimport classes from \"./MyButton.module.css\";\r\n\r\nconst MyButton = (props) => {\r\n  return (\r\n    <button className={classes.MyButton} {...props}>\r\n      {props.name}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default MyButton;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"input\":\"MyInput_input__537b-\",\"error\":\"MyInput_error__klO6M\"};","import React, { forwardRef } from \"react\";\r\nimport classes from \"./MyInput.module.css\";\r\n\r\nconst MyInput = forwardRef(({...props}, ref) => {\r\n\r\n  return (\r\n    <input\r\n    ref={ref}\r\n      className={`${classes.input} ${props.iserror ? classes.error : ''}`}\r\n      {...props}\r\n    placeholder={props.holder}\r\n    />\r\n  );\r\n});\r\n\r\nexport default MyInput;\r\n"],"names":["connect","state","isLogined","login","captcha","auth","getCaptcha","props","navigate","useNavigate","error","setError","useState","undefined","setCaptcha","register","handleSubmit","formState","errors","useForm","useEffect","email","password","_jsxs","className","classes","children","_jsx","onSubmit","data","then","response","console","log","resultCode","MyInput","type","holder","required","iserror","id","src","MyButton","name","forwardRef","_ref","ref","placeholder"],"sourceRoot":""}