{"version":3,"file":"static/js/712.d3c12484.chunk.js","mappings":"qKACA,QAA0B,uBAA1B,EAA+F,oBAA/F,EAA6H,uB,uGC2H7H,SAAeA,EAAAA,EAAAA,KAPQC,IACd,CACLC,UAAWD,EAAME,MAAMD,UACvBE,QAASH,EAAME,MAAMC,WAIe,CAAEC,KAAI,KAAEC,WAAU,KAAEH,MAAM,MAAlE,EAxFyCI,IACvC,MAAMC,GAAWC,EAAAA,EAAAA,OAEVL,EAASM,IAAcC,EAAAA,EAAAA,WAAS,IACjC,SACJC,EAAQ,aACRC,EACAC,WAAW,OAAEC,KACXC,EAAAA,EAAAA,IAAwB,CAAC,IAE7BC,EAAAA,EAAAA,YAAU,KACJV,EAAML,WACRM,EAAS,WACX,GACC,CAACD,EAAML,UAAWM,IAkBrB,OACEU,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAgBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,WACJH,EAAAA,EAAAA,MAAA,QAAMC,UAAWC,EAAcG,SAAUV,GAnB7BW,IACdjB,EAAMJ,MAAMqB,GAAMC,MAAMC,IAClBA,EAASF,KAAKG,aAAeC,EAAAA,GAAWC,kBAC1CnB,GAAW,GACXH,EAAMD,cAIJoB,EAASF,KAAKG,aAAeC,EAAAA,GAAWE,UAC1CtB,EAAS,YACTD,EAAMF,OACR,GACA,IAO8DgB,SAAA,EAC5DC,EAAAA,EAAAA,KAACS,EAAAA,EAAS,CACRC,QAASjB,EAAOkB,MAChBC,GAAG,iBACHC,MAAM,QACNC,QAAQ,WACRC,KAAK,WACDzB,EAAS,QAAS,CAAE0B,UAAU,OAEpChB,EAAAA,EAAAA,KAACS,EAAAA,EAAS,CACRC,QAASjB,EAAOwB,SAChBL,GAAG,iBACHC,MAAM,WACNC,QAAQ,WACRC,KAAK,cACDzB,EAAS,WAAY,CAAE0B,UAAU,OAEvChB,EAAAA,EAAAA,KAACkB,EAAAA,EAAS,CAAAnB,UACRC,EAAAA,EAAAA,KAACmB,EAAAA,EAAgB,CACfN,MAAM,eACNO,SAASpB,EAAAA,EAAAA,KAACqB,EAAAA,EAAQ,OACd/B,EAAS,kBAIhBR,GACCc,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAgBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,OAAKsB,IAAKrC,EAAMH,WAChBkB,EAAAA,EAAAA,KAACS,EAAAA,EAAS,CACRC,QAASjB,EAAOX,QAChB8B,GAAG,iBACHC,MAAM,UACNC,QAAQ,cACJxB,EAAS,UAAW,CAAE0B,UAAU,SAGtC,MAEJhB,EAAAA,EAAAA,KAACuB,EAAAA,EAAM,CAACT,QAAQ,YAAYC,KAAK,SAAQhB,SAAC,gBAIxC,G","sources":["webpack://social_network/./src/components/Login/Login.module.css?3530","components/Login/Login.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"content\":\"Login_content__Or5pz\",\"rememberMe\":\"Login_rememberMe__q-h5T\",\"form\":\"Login_form__csKgm\",\"captcha\":\"Login_captcha__VnIl7\"};","import React, { useEffect, useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport classes from \"./Login.module.css\";\r\n\r\nimport Button from \"@mui/material/Button\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { auth, getCaptcha, login } from \"../../redux/loginReducer.ts\";\r\nimport { ResultCode } from \"../../api/api.ts\";\r\nimport {\r\n  Checkbox,\r\n  FormControlLabel,\r\n  FormGroup,\r\n  TextField,\r\n} from \"@mui/material\";\r\n\r\ntype FormValuesType = {\r\n  email: string;\r\n  password: string;\r\n  captcha: string;\r\n  rememberMe: boolean;\r\n};\r\n\r\ntype LoginPropsType = {\r\n  isLogined: boolean;\r\n  captcha: string | undefined;\r\n  login: (data: {\r\n    email: string;\r\n    password: string;\r\n    rememberMe: boolean;\r\n    captcha: string | null;\r\n  }) => any;\r\n  getCaptcha: () => void;\r\n  auth: () => void;\r\n};\r\n\r\nconst Login: React.FC<LoginPropsType> = (props) => {\r\n  const navigate = useNavigate();\r\n\r\n  const [captcha, setCaptcha] = useState(false);\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm<FormValuesType>({});\r\n\r\n  useEffect(() => {\r\n    if (props.isLogined) {\r\n      navigate(\"/profile\");\r\n    }\r\n  }, [props.isLogined, navigate]);\r\n\r\n  const submit = (data) => {\r\n    props.login(data).then((response) => {\r\n      if (response.data.resultCode === ResultCode.RequiredCaptcha) {\r\n        setCaptcha(true);\r\n        props.getCaptcha();\r\n\r\n      }\r\n\r\n      if (response.data.resultCode === ResultCode.Success) {\r\n        navigate(\"/profile\");\r\n        props.auth();\r\n      }\r\n    });\r\n  };\r\n\r\n\r\n  return (\r\n    <div className={classes.content}>\r\n      <h3>Login</h3>\r\n      <form className={classes.form} onSubmit={handleSubmit(submit)}>\r\n        <TextField\r\n          error={!!errors.email}\r\n          id=\"outlined-basic\"\r\n          label=\"Email\"\r\n          variant=\"outlined\"\r\n          type=\"email\"\r\n          {...register(\"email\", { required: true })}\r\n        />\r\n        <TextField\r\n          error={!!errors.password}\r\n          id=\"outlined-basic\"\r\n          label=\"Password\"\r\n          variant=\"outlined\"\r\n          type=\"password\"\r\n          {...register(\"password\", { required: true })}\r\n        />\r\n        <FormGroup>\r\n          <FormControlLabel\r\n            label=\"Remember me \"\r\n            control={<Checkbox />}\r\n            {...register(\"rememberMe\")}\r\n          />\r\n        </FormGroup>\r\n\r\n        {captcha ? (\r\n          <div className={classes.captcha}>\r\n            <img src={props.captcha} />\r\n            <TextField\r\n              error={!!errors.captcha}\r\n              id=\"outlined-basic\"\r\n              label=\"Captcha\"\r\n              variant=\"outlined\"\r\n              {...register(\"captcha\", { required: true })}\r\n            />\r\n          </div>\r\n        ) : null}\r\n\r\n        <Button variant=\"contained\" type=\"submit\">\r\n          Submit\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    isLogined: state.login.isLogined,\r\n    captcha: state.login.captcha,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { auth, getCaptcha, login })(Login);\r\n"],"names":["connect","state","isLogined","login","captcha","auth","getCaptcha","props","navigate","useNavigate","setCaptcha","useState","register","handleSubmit","formState","errors","useForm","useEffect","_jsxs","className","classes","children","_jsx","onSubmit","data","then","response","resultCode","ResultCode","RequiredCaptcha","Success","TextField","error","email","id","label","variant","type","required","password","FormGroup","FormControlLabel","control","Checkbox","src","Button"],"sourceRoot":""}